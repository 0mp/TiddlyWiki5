title: $:/core/ui/EditTemplate/body/toolbar/button

\define toolbar-button-icon()
<$list filter="[all[current]!has[custom-icon]]" variable="no-custom-icon">
<$transclude tiddler={{!!icon}}/>
</$list>
\end

\define toolbar-button()
<$list filter={{!!condition}} variable="list-condition">
<$list filter="[all[current]!has[dropdown]]" variable="no-dropdown">
<$button class="tc-btn-invisible $(buttonClasses)$">
<span data-tw-keyboard-shortcut={{!!shortcuts}}/>
<<toolbar-button-icon>>
<$transclude tiddler=<<currentTiddler>> field="text"/>
</$button>
</$list>
<$list filter="[all[current]has[dropdown]]" variable="dropdown">
<$set name="dropdown-state" value=<<qualify "$:/state/EditorToolbarDropdown">>>
<$button popup=<<dropdown-state>> class="tc-popup-keep tc-btn-invisible $(buttonClasses)$" selectedClass="tc-selected">
<span data-tw-keyboard-shortcut={{!!shortcuts}}/>
<<toolbar-button-icon>>
<$transclude tiddler=<<currentTiddler>> field="text"/>
</$button>
<$reveal state=<<dropdown-state>> type="popup" position="below" animate="yes" tag="span">
<div class="tc-drop-down tc-popup-keep">
<$transclude tiddler={{!!dropdown}} mode="block"/>
</div>
</$reveal>
</$set>
</$list>
</$list>
\end

\define toolbar-button-outer()
<$set name="buttonClasses" value={{!!button-classes}}>
<<toolbar-button>>
</$set>
\end

<<toolbar-button-outer>>
